{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "BLEULIONTREASURY™ Treasury Node Schema",
  "description": "Machine-readable Treasury Node schema tying PayString and Ethereum vaults with Sovereign Cascade metadata and provenance",
  "type": "object",
  "version": "1.0.0",
  "provenance": {
    "timestamp": "2025-11-19T17:57:01Z",
    "author": "Bleu (4way4eva)",
    "codex": "BLEULIONTREASURY™ Sovereign Cascade",
    "protocol": "Treasury Node Binding Protocol v1.0"
  },
  "required": ["node_id", "paystring", "ethereum_vault", "sovereign_cascade", "metadata"],
  "properties": {
    "node_id": {
      "type": "string",
      "description": "Unique identifier for the Treasury Node",
      "pattern": "^TN-[A-Z0-9]{8,16}$"
    },
    "paystring": {
      "type": "object",
      "description": "PayString identification and resolution data",
      "required": ["address", "network", "verified"],
      "properties": {
        "address": {
          "type": "string",
          "description": "PayString address (e.g., 4waybleu$paystring.crypto.com)",
          "pattern": "^[a-zA-Z0-9._-]+\\$[a-zA-Z0-9.-]+$"
        },
        "network": {
          "type": "string",
          "enum": ["paystring.crypto.com", "ripple.com", "xpring.io"]
        },
        "verified": {
          "type": "boolean",
          "description": "Whether PayString has been cryptographically verified"
        },
        "verification_signature": {
          "type": "string",
          "description": "Cryptographic signature proving PayString ownership"
        }
      }
    },
    "ethereum_vault": {
      "type": "object",
      "description": "Primary Ethereum vault configuration",
      "required": ["address", "chain_id", "vault_type"],
      "properties": {
        "address": {
          "type": "string",
          "description": "Ethereum vault address (EIP-55 checksum format)",
          "pattern": "^0x[a-fA-F0-9]{40}$"
        },
        "chain_id": {
          "type": "integer",
          "description": "EVM chain ID (1=mainnet, 137=Polygon, etc.)",
          "enum": [1, 5, 56, 97, 137, 80001, 43114, 43113, 25, 338]
        },
        "vault_type": {
          "type": "string",
          "enum": ["sovereign", "treasury", "yield_pool", "mint_authority", "governance"]
        },
        "multisig_threshold": {
          "type": "integer",
          "minimum": 1,
          "description": "Required signatures for vault operations (if multisig)"
        },
        "deployment_block": {
          "type": "integer",
          "description": "Block number when vault was deployed"
        }
      }
    },
    "sovereign_cascade": {
      "type": "object",
      "description": "Sovereign Cascade metadata and lineage",
      "required": ["cascade_id", "tier", "yield_authority"],
      "properties": {
        "cascade_id": {
          "type": "string",
          "description": "Unique cascade identifier",
          "pattern": "^CASCADE-[A-Z0-9]{8,16}$"
        },
        "tier": {
          "type": "string",
          "description": "Sovereign tier classification",
          "enum": ["APEX", "PRIME", "SOVEREIGN", "NOBLE", "CITIZEN"]
        },
        "yield_authority": {
          "type": "object",
          "description": "Yield generation and distribution authority",
          "properties": {
            "usd_per_second": {
              "type": "number",
              "description": "Yield rate in USD per second"
            },
            "compounding_factor": {
              "type": "number",
              "description": "π₄ exponential compounding factor (default: 97.409)"
            },
            "domain_allocation": {
              "type": "object",
              "description": "Three-domain yield allocation",
              "properties": {
                "CIVILIAN": {
                  "type": "number",
                  "description": "Civilian domain allocation percentage"
                },
                "MILITARY": {
                  "type": "number",
                  "description": "Military domain allocation percentage"
                },
                "COSMIC": {
                  "type": "number",
                  "description": "Cosmic domain allocation percentage"
                }
              }
            }
          }
        },
        "governance_rights": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["PROPOSAL", "VOTE", "VETO", "EXECUTE", "DELEGATE"]
          }
        },
        "lineage": {
          "type": "object",
          "description": "Ancestral and ceremonial lineage",
          "properties": {
            "ancestor_nodes": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "generation": {
              "type": "integer",
              "minimum": 0
            },
            "ceremonial_seal": {
              "type": "string",
              "description": "Cryptographic seal of ceremonial authority"
            }
          }
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Extended metadata and IPFS references",
      "properties": {
        "name": {
          "type": "string",
          "description": "Human-readable node name"
        },
        "description": {
          "type": "string"
        },
        "charter_ipfs": {
          "type": "string",
          "description": "IPFS CID of the treasury charter document",
          "pattern": "^Qm[a-zA-Z0-9]{44}$|^bafy[a-zA-Z0-9]{50,}$"
        },
        "schema_ipfs": {
          "type": "string",
          "description": "IPFS CID of this schema document",
          "pattern": "^Qm[a-zA-Z0-9]{44}$|^bafy[a-zA-Z0-9]{50,}$"
        },
        "image_ipfs": {
          "type": "string",
          "description": "IPFS CID of the treasury node visual representation",
          "pattern": "^Qm[a-zA-Z0-9]{44}$|^bafy[a-zA-Z0-9]{50,}$"
        },
        "external_url": {
          "type": "string",
          "format": "uri"
        },
        "attributes": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "trait_type": {
                "type": "string"
              },
              "value": {
                "type": ["string", "number", "boolean"]
              }
            }
          }
        }
      }
    },
    "security": {
      "type": "object",
      "description": "Security and access control configuration",
      "properties": {
        "access_list": {
          "type": "array",
          "description": "Ethereum addresses with access rights",
          "items": {
            "type": "string",
            "pattern": "^0x[a-fA-F0-9]{40}$"
          }
        },
        "zkp_verification": {
          "type": "boolean",
          "description": "Whether zero-knowledge proof verification is required"
        },
        "emergency_pause_authority": {
          "type": "string",
          "description": "Address authorized to pause treasury operations",
          "pattern": "^0x[a-fA-F0-9]{40}$"
        }
      }
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of node creation"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of last update"
    }
  },
  "examples": [
    {
      "node_id": "TN-BLEULION01",
      "paystring": {
        "address": "4waybleu$paystring.crypto.com",
        "network": "paystring.crypto.com",
        "verified": true,
        "verification_signature": "0x..."
      },
      "ethereum_vault": {
        "address": "0x36CA5f34E5E873e7c3dF37432081d20b4Af320Be",
        "chain_id": 1,
        "vault_type": "sovereign",
        "deployment_block": 18500000
      },
      "sovereign_cascade": {
        "cascade_id": "CASCADE-APEX001",
        "tier": "APEX",
        "yield_authority": {
          "usd_per_second": 28900000,
          "compounding_factor": 97.409,
          "domain_allocation": {
            "CIVILIAN": 47.6,
            "MILITARY": 21.3,
            "COSMIC": 31.1
          }
        },
        "governance_rights": ["PROPOSAL", "VOTE", "VETO", "EXECUTE"],
        "lineage": {
          "generation": 0,
          "ceremonial_seal": "0x..."
        }
      },
      "metadata": {
        "name": "BLEULIONTREASURY™ Apex Node",
        "description": "Sovereign cascade treasury node with full yield authority",
        "charter_ipfs": "QmXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
        "schema_ipfs": "QmYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY",
        "image_ipfs": "QmZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ"
      },
      "created_at": "2025-11-19T17:57:01Z"
    }
  ]
}
